/* css/theme.css */
/* Multi-theme system — each theme exposes the same tokens.
   Switch theme by setting data-theme on <html>, e.g. <html data-theme="aqua"> */

/* =========================================================
   SPENDRILL — GLOBAL THEME SYSTEM
   ========================================================= */

/* Dark Theme Variables */
:root {
  --bg-main: #050B16;
  --bg-card: rgba(255,255,255,0.04);
  --bg-card-strong: rgba(255,255,255,0.06);
  --bg-blur: rgba(0,0,0,0.55);

  --text-main: #F2F7FF;
  --text-sub: #7E8FA8;
  --text-muted: #63738C;

  --border-light: rgba(255,255,255,0.06);

  --accent-blue: #2563eb;
  --accent-cyan: #06b6d4;
  --accent-mint: #2dd4bf;
  --expense-color: #FF5E79;

  /* Safe Areas */
  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);

  /* Radii */
  --radius-small: 8px;
  --radius-medium: 14px;
  --radius-large: 20px;

  /* Shadows */
  --shadow-1: 0 4px 12px rgba(0,0,0,0.35);
  --shadow-2: 0 12px 30px rgba(0,0,0,0.5);

  /* Layout Heights - CRITICAL */
  --header-height: calc(58px + env(safe-area-inset-top));
  --tabbar-height: calc(76px + env(safe-area-inset-bottom));
}

/* =========================================================
   Global Reset
   ========================================================= */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}

html, body {
  width: 100%;
  height: 100%;
  background: var(--bg-main);
  color: var(--text-main);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", Inter, Roboto, sans-serif;
  overflow: hidden;
  position: fixed;
}

body.no-scroll {
  overflow: hidden !important;
}

/* =========================================================
   APP ROOT - THE KEY CONTAINER
   ========================================================= */

.app-root {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  
  display: flex;
  flex-direction: column;
  
  background: var(--bg-main);
  overflow: hidden;
}

/* =========================================================
   HEADER - FIXED AT TOP (FLOATS OVER CONTENT)
   ========================================================= */

header-bar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--header-height);
  z-index: 9999;
  pointer-events: auto;
}

/* =========================================================
   TAB BAR - FIXED AT BOTTOM (FLOATS OVER CONTENT)
   ========================================================= */

tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: var(--tabbar-height);
  z-index: 999;
  pointer-events: auto;
}

/* =========================================================
   SCREENS - SCROLLABLE WITH PADDING FOR HEADER/TABBAR
   Content scrolls UNDER the header (for blur effect)
   ========================================================= */

[data-screen] {
  position: fixed;
  top: 0;              /* ✅ Starts at top (behind header) */
  left: 0;
  right: 0;
  bottom: 0;           /* ✅ Goes to bottom (behind tabbar) */
  
  width: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  
  /* ✅ Padding to avoid header/tabbar overlap */
  padding-top: var(--header-height);
  padding-bottom: var(--tabbar-height);
  
  background: var(--bg-main);
  box-sizing: border-box;
}

/* Router visibility */
[data-screen][hidden] {
  display: none !important;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 6px;
}
::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.1);
  border-radius: 3px;
}

/* ================================
   THEMES
   ================================ */

:root[data-theme="midnight"] {
  --bg-main: #050B16;
  --bg-surface: #0A1220;
  --text-primary: #F2F7FF;
  --text-secondary: #7E8FA8;
  --text-tertiary: #63738C;
  --accent: #3B82F6;
  --accent-glow: rgba(59,130,246,0.35);
  --expense: #FF5E79;
  --icon-bg: rgba(255,255,255,0.07);
  --card-bg: rgba(255,255,255,0.03);
  --border-subtle: rgba(255,255,255,0.06);
  --shadow-strong: rgba(0,0,0,0.45);
}

:root[data-theme="aqua"] {
  --bg-main: #021012;
  --bg-surface: #04191C;
  --text-primary: #D9FEFF;
  --text-secondary: #7ADDE1;
  --text-tertiary: #4BA9AD;
  --accent: #2DD4BF;
  --accent-glow: rgba(45,212,191,0.42);
  --expense: #FF5E79;
  --icon-bg: rgba(255,255,255,0.12);
  --card-bg: rgba(255,255,255,0.06);
  --border-subtle: rgba(255,255,255,0.10);
  --shadow-strong: rgba(0,0,0,0.40);
}

:root[data-theme="purple"] {
  --bg-main: #0F0515;
  --bg-surface: #1A0A25;
  --text-primary: #F5EBFF;
  --text-secondary: #B794E8;
  --text-tertiary: #8B68C7;
  --accent: #A855F7;
  --accent-glow: rgba(168,85,247,0.38);
  --expense: #FF5E79;
  --icon-bg: rgba(255,255,255,0.10);
  --card-bg: rgba(255,255,255,0.05);
  --border-subtle: rgba(255,255,255,0.08);
  --shadow-strong: rgba(0,0,0,0.42);
}

:root[data-theme="forest"] {
  --bg-main: #0A1410;
  --bg-surface: #0F1F18;
  --text-primary: #E8FFF4;
  --text-secondary: #7FD9A8;
  --text-tertiary: #5AAF7E;
  --accent: #10B981;
  --accent-glow: rgba(16,185,129,0.36);
  --expense: #FF5E79;
  --icon-bg: rgba(255,255,255,0.08);
  --card-bg: rgba(255,255,255,0.04);
  --border-subtle: rgba(255,255,255,0.07);
  --shadow-strong: rgba(0,0,0,0.43);
}

:root[data-theme="ember"] {
  --bg-main: #160707;
  --bg-surface: #220B0B;
  --text-primary: #FFE8E8;
  --text-secondary: #FF9B9B;
  --text-tertiary: #D66B6B;
  --accent: #EF4444;
  --accent-glow: rgba(239,68,68,0.40);
  --expense: #FF5E79;
  --icon-bg: rgba(255,255,255,0.09);
  --card-bg: rgba(255,255,255,0.04);
  --border-subtle: rgba(255,255,255,0.07);
  --shadow-strong: rgba(0,0,0,0.44);
}

:root[data-theme="sunset"] {
  --bg-main: #1A0F05;
  --bg-surface: #251808;
  --text-primary: #FFF4E0;
  --text-secondary: #FFB84D;
  --text-tertiary: #D9943D;
  --accent: #F59E0B;
  --accent-glow: rgba(245,158,11,0.38);
  --expense: #FF5E79;
  --icon-bg: rgba(255,255,255,0.08);
  --card-bg: rgba(255,255,255,0.04);
  --border-subtle: rgba(255,255,255,0.07);
  --shadow-strong: rgba(0,0,0,0.42);
}